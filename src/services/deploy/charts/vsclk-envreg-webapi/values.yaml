# Default values for vsclk-enverg-webapi
# This is a YAML-formatted file.
# Declare variables to be passed into your templates.

pods:
  replicaCount: 2
  maxReplicaCount: 5
  minReadySeconds: 1
  progressDeadlineSeconds: 300
  livenessProbePath:
  readinessProbePath:
  targetCpuUtilizationPercentage: 60

image:
  tag:
  repositoryUrl:
  repositoryName: vsclk.envreg.webapi
  pullPolicy: IfNotPresent
  imagePullSecret:

service:
  name: envreg
  type: ClusterIP
  externalPort: 80
  internalPort: 80

ingress:
  enabled: true
  annotations:
    nginx.ingress.kubernetes.io/rewrite-target: /api/$1
  path: /api/environment/?(.*)
  hosts:
    - ci.dev.core.vsengsaas.visualstudio.com
  tls:
    - secretName: ssl-cert
      hosts:
        - ci.dev.core.vsengsaas.visualstudio.com

appSettings:
- ASPNETCORE_ENVIRONMENT
- ENVREG_AppSettings__AuthJwtAudiences
- ENVREG_AppSettings__AuthJwtAuthority
- ENVREG_AppSettings__VsClkEnvRegDbHost
- ENVREG_AppSettings__VsClkEnvRegDbKey
- ENVREG_AppSettings__VsClkEnvRegPreferredLocation
- ENVREG_AppSettings__VsClkEnvRegDbId
- ENVREG_AppSettings__KeyVaultName
- ENVREG_AppSettings__VsClkRedisConnectionString

authentication:
  authority: https://login.windows.net/common
  # Note that 9db1d849-f699-4cfb-8160-64bed3335c72 is the DEV appid
  # the others are temporary, client appids
  audiences: "9db1d849-f699-4cfb-8160-64bed3335c72,aebc6443-996d-45c2-90f0-388ff96faa56,872cd9fa-d31f-45e0-9eab-6e460a02d1f1"

azure-secrets:
  # vsclk-core-dev
  subscriptionId-dev: 86642df6-843e-4610-a956-fdd497102261
  keyVaultName-dev: vsclk-core-svc-dev-kv

# TODO: these would need to be generated/overriden per environment
# See src\Deployment\ValuesFiles\values.{env}.yaml in IntelliCode
config:
  aspNetEnv: Development
  databaseId: environment-registration
  dbPreferredLocation: eastus
  keyVaultName: vsclk-core-svc-dev-kv
