.create-or-alter function
with (docstring = 'Create codespaces - failure correlation id and codespace id', folder='Dashboards/Reliability/Create')
getCreateProcessErrors
(T:(EventAtCreateRequestStop_ResponseCode: int, 
    TimeStamp: datetime, 
    CreateOutcome: string,
    EventAtCreateRequestStart_CorrelationId: string, 
    EventAtProvisioningToFailed_ErrorDetail: string, 
    EventAtProvisioningToFailedTask_ErrorDetail: string, 
    CodespaceId: string, 
    BuildId: string))
{
    T
        | where EventAtCreateRequestStop_ResponseCode == 201
        | where TimeStamp < ago(1h)
        | where CreateOutcome startswith "Infrastructure:" or CreateOutcome startswith "Bug:"
        | project CreateOutcome, EventAtProvisioningToFailed_ErrorDetail, EventAtProvisioningToFailedTask_ErrorDetail, EventAtCreateRequestStart_CorrelationId, CodespaceId, BuildId, TimeStamp
        | order by TimeStamp desc 
}
