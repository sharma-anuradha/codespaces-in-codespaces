#include("ShutdownEnvironmentPOSTRequestEvents.ksf")
let ShutdownEnvironmentRequestStartEvents = ShutdownEnvironmentPOSTRequestEvents
    | where msg == "request_start" 
    | extend EventAtShutdownRequestStart = 1
    | extend EventAtShutdownRequestStart_Time = ["time"]
    | extend EventAtShutdownRequestStart_CorrelationId = CorrelationId
    | project EventAtShutdownRequestStart, EventAtShutdownRequestStart_Time, EventAtShutdownRequestStart_CorrelationId,
        Service, CommitId, ServiceEnvironment, ServiceInstance, ServiceStamp, ServiceLocation, BuildId
    | summarize arg_min(EventAtShutdownRequestStart_Time, *) by EventAtShutdownRequestStart_CorrelationId;